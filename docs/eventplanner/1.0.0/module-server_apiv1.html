<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Module: server/apiv1</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Module: server/apiv1</h1>

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description"><p>Provides functionality for the server.</p></div>
        

        
            















<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line3">line 3</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="~authorizeUser"><span class="type-signature">(async, inner) </span>authorizeUser<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>authorizeUser is a GET function and receives the email in form of a query.
Makes a query whether this exists in the database. If it does not exist, it checks the domain of the email.
If this is within the University Of Portsmouth domain, then do the registration,
otherwise send a message saying that the user is not authorized.
If the email is already in the database, then simply log the user in.
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return the user information.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line68">line 68</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~bringItem"><span class="type-signature">(async, inner) </span>bringItem<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the <code>userBringerID</code> of the item to the <code>userID</code> in the request body.
Uses attributes <code>eventID</code> and <code>eventItemName</code> also in the request body to
identify the item.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line610">line 610</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~createEvent"><span class="type-signature">(async, inner) </span>createEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>createEvent is called as a POST function so it receives data through the req.body
It creates a Random ID for the new event and injects all the information together withi
the ID into the DB 'event' Table. Furthermore, it loops through the shopping list
items and add them into the 'shoppinglistitem' Table.
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return status 200 (completed).</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line131">line 131</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~deleteEvent"><span class="type-signature">(async, inner) </span>deleteEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>deleteEvent is a DELETE function and it receives data through the req.query.
The host user is able to delete the selected event, so this function runs two
queries to delete the actual event and the items within the shopping list of This
specific event.
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return status 200 (completed).</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line260">line 260</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~displayEvent"><span class="type-signature">(async, inner) </span>displayEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns all data about the most recent 12 public events.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line330">line 330</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~editEvent"><span class="type-signature">(async, inner) </span>editEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>editEvent is called as a POST function so it receives data through the req.body
It update the DB 'event' Table so that all the old information are replaced
with the new ones.
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return the result of the query.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line170">line 170</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~filterEvent"><span class="type-signature">(async, inner) </span>filterEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>filterEvent is a GET function and it receives data through the req.query.
eventType could be undefined depending on user's decision, so it needs to be checked
and run alternative query.
With the key word 'LIKE' it is possible to retrieve events
that contain letters/words inserted by the user (so the user does not need to type the
entire event name).
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return the event list.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line291">line 291</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getMessages"><span class="type-signature">(async, inner) </span>getMessages<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Gets all messages between userIDs given by query parameters p1 and p2.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line396">line 396</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getMessagingThreads"><span class="type-signature">(async, inner) </span>getMessagingThreads<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Gets all messages between userIDs given by query parameters p1 and p2.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line420">line 420</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getSingleEvent"><span class="type-signature">(async, inner) </span>getSingleEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Gets a single event given by the 'eventID' query param.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line501">line 501</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getTimetable"><span class="type-signature">(async, inner) </span>getTimetable<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Will generate and serve an iCalendar format file using the userID given in the filename request.
Extensions: ical, ics, ifb, icalendar.
Filename must be a valid userID in the database.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line523">line 523</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getTypes"><span class="type-signature">(async, inner) </span>getTypes<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns all types contained within the database.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line366">line 366</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getUser"><span class="type-signature">(async, inner) </span>getUser<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns all data about a user given by the <code>userID</code> query param.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line381">line 381</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getUserByEmail"><span class="type-signature">(async, inner) </span>getUserByEmail<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Returns all data stored about the user in the database,
the user identified by the <code>email</code> query param.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line102">line 102</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~getUserEvents"><span class="type-signature">(async, inner) </span>getUserEvents<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Gets events that the user (given by the <code>hostID</code> query param) has created.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line584">line 584</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~joinedEvent"><span class="type-signature">(async, inner) </span>joinedEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>joinedEvent is called as a GET function and receives data in form of a query.
userID is the current user logged in while eventID is the selected event when
the viewEvent function is triggered. If the current user already joined this event,
the 'joinEvent' button would be disabled
If the connection with the DB or the query is not completed, an error 500 is returned.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line210">line 210</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~joinEvent"><span class="type-signature">(async, inner) </span>joinEvent<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>joinEvent is called as a POST function so it receives data through the req.body
userID is the current user logged in while eventID is the selected event when
the viewEvent function is triggered. If the user has not joined the event yet,
it would be added in the list of guests.
If the connection with the DB or the query is not completed, an error 500 is returned.
If query is completed return status 200 (completed).</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line235">line 235</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~postMessage"><span class="type-signature">(async, inner) </span>postMessage<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Adds a message to memory model given by JSON body attributes p1 and p2 and userID.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line450">line 450</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~saveSettings"><span class="type-signature">(async, inner) </span>saveSettings<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Saves values of a user identified by the JSON body attribute <code>email</code>
with the other values contained within the JSON body.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line645">line 645</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
            

    

    
    <h4 class="name" id="~unbringItem"><span class="type-signature">(async, inner) </span>unbringItem<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    <p>Sets the <code>userBringerID</code> of the item to <code>null</code>.
Uses attributes <code>eventID</code>, <code>eventItemName</code>, and <code>userBringerID</code> in the request body to
identify the item.</p>
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="server_apiv1.js.html">server/apiv1.js</a>, <a href="server_apiv1.js.html#line628">line 628</a>
    </li></ul></dd>
    

    

    

    
</dl>


















        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-public_scripts_common.html">public/scripts/common</a></li><li><a href="module-public_scripts_createEvent.html">public/scripts/createEvent</a></li><li><a href="module-public_scripts_eventsForm.html">public/scripts/eventsForm</a></li><li><a href="module-public_scripts_index.html">public/scripts/index</a></li><li><a href="module-public_scripts_manageEvents.html">public/scripts/manageEvents</a></li><li><a href="module-public_scripts_messaging.html">public/scripts/messaging</a></li><li><a href="module-public_scripts_timetable.html">public/scripts/timetable</a></li><li><a href="module-public_scripts_util.html">public/scripts/util</a></li><li><a href="module-server_apiv1.html">server/apiv1</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu Apr 04 2019 14:46:42 GMT+0100 (British Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>